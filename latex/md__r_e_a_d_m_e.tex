The code that will go into the sensor nodes to record and transmit data\hypertarget{md__r_e_a_d_m_e_autotoc_md1}{}\doxysection{Setup Process}\label{md__r_e_a_d_m_e_autotoc_md1}
The process for setting up the code and flashing it to the device is listed below. Eventually I plan on scripting this process with a bash file so that it is automated.


\begin{DoxyEnumerate}
\item Clone Git Repo on local device
\item Download and install conda, if not already done
\begin{DoxyEnumerate}
\item Windows\+: \href{https://repo.anaconda.com/miniconda/Miniconda3-py39_4.12.0-Windows-x86_64.exe}{\texttt{ https\+://repo.\+anaconda.\+com/miniconda/\+Miniconda3-\/py39\+\_\+4.\+12.\+0-\/\+Windows-\/x86\+\_\+64.\+exe}}
\item Linux/\+Raspbian\+: \href{https://repo.anaconda.com/miniconda/Miniconda3-py39_4.12.0-Linux-aarch64.sh}{\texttt{ https\+://repo.\+anaconda.\+com/miniconda/\+Miniconda3-\/py39\+\_\+4.\+12.\+0-\/\+Linux-\/aarch64.\+sh}}
\begin{DoxyEnumerate}
\item Navigate to the conda directory ({\ttfamily \char`\"{}\+C\+:\textbackslash{}\+Users\textbackslash{}\{\+Current\+\_\+\+User\}\textbackslash{}miniconda3\textbackslash{}\+Scripts\char`\"{}} on Windows)
\item Run {\ttfamily ./conda init -\/-\/verbose}
\item Restart all terminals (if vscode, restart the whole IDE)
\end{DoxyEnumerate}
\end{DoxyEnumerate}
\item Create a conda environment from the yml file
\item Flash the desired branch to the RPi (Pico/\+Zero) module
\end{DoxyEnumerate}\hypertarget{md__r_e_a_d_m_e_autotoc_md2}{}\doxysection{Functions}\label{md__r_e_a_d_m_e_autotoc_md2}

\begin{DoxyEnumerate}
\item Record data from storms
\begin{DoxyEnumerate}
\item RTC Time
\item GPS Location
\item Strike Distance
\item Intensity?
\end{DoxyEnumerate}
\item Transmit data packets to Server through Lo\+Ra
\item \mbox{[}Optional\mbox{]} Receive packets from other Nodes (mesh)
\end{DoxyEnumerate}\hypertarget{md__r_e_a_d_m_e_autotoc_md3}{}\doxysection{Software Flowchart}\label{md__r_e_a_d_m_e_autotoc_md3}

\begin{DoxyEnumerate}
\item $\ast$$\ast$\+\_\+\mbox{[}TODO\+: This part is potentially run in multiple threads\mbox{]}\+\_\+$\ast$$\ast$
\item $\ast$$\ast$\+\_\+\mbox{[}FIXME\+: If we are doing mesh, then we will need to account for both TX and RX\+\_\+$\ast$$\ast$
\end{DoxyEnumerate}\hypertarget{md__r_e_a_d_m_e_autotoc_md4}{}\doxysubsection{Thread 1}\label{md__r_e_a_d_m_e_autotoc_md4}

\begin{DoxyEnumerate}
\item A lightning strike is detected
\item Read in the sensor data for distance
\item Read in the exact RTC module time
\item Read in the GPS Location $\ast$$\ast$\+\_\+\mbox{[}FIXME\+: should this be measured every time or should we store the location on the server during initial setup/handshake and assume it doesn\textquotesingle{}t move?\mbox{]}\+\_\+$\ast$$\ast$
\item Package this all up in some form of struct $\ast$$\ast$\+\_\+\mbox{[}TODO\+: Decide on best format. What can Lo\+Ra transmit best? JSON, CSV, dict, string, etc.\mbox{]}\+\_\+$\ast$$\ast$
\item $\ast$$\ast$\+\_\+\mbox{[}FIXME\+: How do we indicate to the second thread that there is a packet ready to be sent? Ideas listed below\mbox{]}\+\_\+$\ast$$\ast$
\begin{DoxyEnumerate}
\item Set a flag that will be read by Thread 2 to indicate that there is at least one packet to be sent. The second thread can then be set on a schedule to send/clear out all packets every hour or so.
\item If each package has it\textquotesingle{}s own output file, the second thread could check the output directory for new files, send them immediately, and then delete them afterwards. Does the RPi Pico have a file structure?
\end{DoxyEnumerate}
\end{DoxyEnumerate}\hypertarget{md__r_e_a_d_m_e_autotoc_md5}{}\doxysubsection{Thread 2}\label{md__r_e_a_d_m_e_autotoc_md5}

\begin{DoxyEnumerate}
\item This thread will be responsibly for Lo\+Ra control. It will either run on a schedule, or it will run whenever a new packet is detected from the first thread (see step 6 above).
\item If we decide to use mesh, then this will also handle receiving from other Nodes that can\textquotesingle{}t reach the Server on their own.
\item Once this thread decides to send a packet, it should establish a connection with the server to ensure that it is listening
\begin{DoxyEnumerate}
\item $\ast$$\ast$\+\_\+\mbox{[}TODO\+: Figure out how to do this, whether it is through pinging or through py\+Lo\+Ra features\mbox{]}\+\_\+$\ast$$\ast$
\end{DoxyEnumerate}
\item Send the packet across through whatever structure we decided on previously.
\item We could add a handshake to confirm that the packet was sent properly, however this may be too complex, unnecessary, or slow.
\end{DoxyEnumerate}\hypertarget{md__r_e_a_d_m_e_autotoc_md6}{}\doxysubsection{Documentation}\label{md__r_e_a_d_m_e_autotoc_md6}
The source code comments aim to follow PEP8 and Doxygen requirements, and an html webpage has been generated using doxygen for documentation purposes.

To recompile the Doxygen html generation, simply run {\ttfamily \char`\"{}doxygen lnb-\/node\char`\"{}} from the project directory 