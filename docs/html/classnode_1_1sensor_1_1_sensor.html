<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LNB-Node: node.sensor.Sensor Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Team Logo.JPG"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LNB-Node
   &#160;<span id="projectnumber">1</span>
   </div>
   <div id="projectbrief">Software for the lightning detection node array</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacenode.html">node</a></li><li class="navelem"><a class="el" href="namespacenode_1_1sensor.html">sensor</a></li><li class="navelem"><a class="el" href="classnode_1_1sensor_1_1_sensor.html">Sensor</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classnode_1_1sensor_1_1_sensor-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">node.sensor.Sensor Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af6dec9683ef01ac65fe12d5588d109b4"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnode_1_1sensor_1_1_sensor.html#af6dec9683ef01ac65fe12d5588d109b4">__init__</a> (self)</td></tr>
<tr class="separator:af6dec9683ef01ac65fe12d5588d109b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef83d94906e541be664384daa492cceb"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnode_1_1sensor_1_1_sensor.html#aef83d94906e541be664384daa492cceb">get_GPS_Fix</a> (self)</td></tr>
<tr class="separator:aef83d94906e541be664384daa492cceb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2297632c7c6c66a6af9538e23d6d4742"><td class="memItemLeft" align="right" valign="top">str&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnode_1_1sensor_1_1_sensor.html#a2297632c7c6c66a6af9538e23d6d4742">timestamp</a> (self)</td></tr>
<tr class="separator:a2297632c7c6c66a6af9538e23d6d4742"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ad24506ff05f62856f3a60e9e7c58de"><td class="memItemLeft" align="right" valign="top">str&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnode_1_1sensor_1_1_sensor.html#a4ad24506ff05f62856f3a60e9e7c58de">lightning</a> (self)</td></tr>
<tr class="separator:a4ad24506ff05f62856f3a60e9e7c58de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec9385179c0bd14b8922928dd76a7881"><td class="memItemLeft" align="right" valign="top">str&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnode_1_1sensor_1_1_sensor.html#aec9385179c0bd14b8922928dd76a7881">collect</a> (self)</td></tr>
<tr class="separator:aec9385179c0bd14b8922928dd76a7881"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a285557b976d247d361c4eb4ab3c779bd"><td class="memItemLeft" align="right" valign="top"><a id="a285557b976d247d361c4eb4ab3c779bd"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnode_1_1sensor_1_1_sensor.html#a285557b976d247d361c4eb4ab3c779bd">clock</a></td></tr>
<tr class="memdesc:a285557b976d247d361c4eb4ab3c779bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize Modules. <br /></td></tr>
<tr class="separator:a285557b976d247d361c4eb4ab3c779bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a868bf7599edf1550ece057bc5251cf18"><td class="memItemLeft" align="right" valign="top"><a id="a868bf7599edf1550ece057bc5251cf18"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>GPS_ENABLE</b></td></tr>
<tr class="separator:a868bf7599edf1550ece057bc5251cf18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af25945ae93763fa4227e331ac371b561"><td class="memItemLeft" align="right" valign="top"><a id="af25945ae93763fa4227e331ac371b561"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>gps_fix</b></td></tr>
<tr class="separator:af25945ae93763fa4227e331ac371b561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1d94a9ea1f6ed6ea27f26eceade534c"><td class="memItemLeft" align="right" valign="top"><a id="af1d94a9ea1f6ed6ea27f26eceade534c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>as3935_interrupt_pin</b></td></tr>
<tr class="separator:af1d94a9ea1f6ed6ea27f26eceade534c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13a964d0ee0bbfdc1318d1969b89cb37"><td class="memItemLeft" align="right" valign="top"><a id="a13a964d0ee0bbfdc1318d1969b89cb37"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>PiLED</b></td></tr>
<tr class="separator:a13a964d0ee0bbfdc1318d1969b89cb37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8edd5cef054391e22575b14ab1a33715"><td class="memItemLeft" align="right" valign="top"><a id="a8edd5cef054391e22575b14ab1a33715"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>as3935</b></td></tr>
<tr class="separator:a8edd5cef054391e22575b14ab1a33715"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment"> Reads the sensors </pre> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af6dec9683ef01ac65fe12d5588d109b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6dec9683ef01ac65fe12d5588d109b4">&#9670;&nbsp;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None node.sensor.Sensor.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment"> Initializes Sensor Modules connected to the Pico

RTC needs to be initialized and updated
GPS only needs to be on until it acquires a fix, then it can be disabled to save power
and reduce noise.
The lightning sensor needs to be initialized, calibrated, and 

Args:
    None
Returns:
    None
</pre> 
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aec9385179c0bd14b8922928dd76a7881"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec9385179c0bd14b8922928dd76a7881">&#9670;&nbsp;</a></span>collect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> str node.sensor.Sensor.collect </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment"> Collects data from sensors and compiles it into a string

This thread will handle all communications with the sensors and create new packets
This function will not return until lightning is actually detected

Args:
    None
Returns:
    packet (str): The properly formatted packet to be passed to LoRa
</pre> 
</div>
</div>
<a id="aef83d94906e541be664384daa492cceb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef83d94906e541be664384daa492cceb">&#9670;&nbsp;</a></span>get_GPS_Fix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def node.sensor.Sensor.get_GPS_Fix </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment"> Acquire current GPS Fix from the module communicating with satellites

This function will block until a GPS Fix is acquired, then 

Args:
    None
Returns:
    time (str): current time
</pre> 
</div>
</div>
<a id="a4ad24506ff05f62856f3a60e9e7c58de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ad24506ff05f62856f3a60e9e7c58de">&#9670;&nbsp;</a></span>lightning()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> str node.sensor.Sensor.lightning </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment"> Interacts with the Lightning Sensor Module

Args:
    None
Returns:
    ls_out (str): a concatenated string with sensor data for the packet

GPIO Pins Involved:
- CS ["Chip Select"]: Pull low to activate SPI reception
- IRQ ["Interrupt request"]: Triggers when a strike is detected
- SCL: Clock
- MISO: Data from AS3935 to microcontroller
- MOSI: Data from microcontroller to AS3935</pre> 
</div>
</div>
<a id="a2297632c7c6c66a6af9538e23d6d4742"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2297632c7c6c66a6af9538e23d6d4742">&#9670;&nbsp;</a></span>timestamp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> str node.sensor.Sensor.timestamp </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment"> Acquire current time from Real Time Clock Module.

This uses the internal Pico RTC module, but alternatively it can be used with an external
module if the given microcontroller doesn't have an internal RTC.
The value stored in this RTC is initialized from the GPS Fix, however if the GPS is
disabled or disconnected, it will use a default value instead.

Args:
    None
Returns:
    time (str): current time
TODO: Reformat the timestamp into an easily readable string
</pre> 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>node/sensor.py</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
